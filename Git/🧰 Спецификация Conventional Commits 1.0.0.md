
## Назначение

Conventional Commits — это легковесное соглашение поверх сообщений коммитов. Оно предоставляет простой набор правил для создания явной истории коммитов, что облегчает создание автоматизированных инструментов. Это соглашение сочетается с SemVer (Semantic Versioning), описывая функции, исправления и критические изменения, вносимые в сообщения коммитов.


## Структура сообщения коммита

```
<type>[optional scope]: <description>
[optional body]
[optional footer(s)]
```


## Структурные элементы

1. **`<type>` (Тип):**
    - `fix:` — коммит, исправляющий баг в кодовой базе (соответствует `PATCH` в SemVer).
    - `feat:` — коммит, добавляющий новую функцию в кодовую базу (соответствует `MINOR` в SemVer).
    - `BREAKING CHANGE:` — коммит, который имеет футер `BREAKING CHANGE:` или содержит `!` после типа/области, вносит критическое изменение API (соответствует `MAJOR` в SemVer). Критическое изменение может быть частью коммитов любого типа.
    - Другие типы (например, `build:`, `chore:`, `ci:`, `docs:`, `style:`, `refactor:`, `perf:`, `test:`) разрешены, но не имеют неявного эффекта в SemVer (если только они не включают `BREAKING CHANGE`).

2. **`[optional scope]` (Опциональная область):**
    - Предоставляется в скобках после типа для указания дополнительного контекста, например, `feat(parser): add ability to parse arrays`.

3. **`<description>` (Описание):**
    - Краткое резюме изменений кода. Следует сразу после двоеточия и пробела после префикса типа/области.

4. **`[optional body]` (Опциональное тело):**
    - Может быть предоставлено для предоставления дополнительной контекстной информации. Начинается с одной пустой строки после описания. Может состоять из любого количества абзацев, разделенных символами новой строки.

5. **`[optional footer(s)]` (Опциональные футеры):**
    - Может быть предоставлен один или несколько футеров, одна пустая строка после тела или описания (если тело отсутствует). Каждый футер состоит из токена (слово), за которым следует `:<space>` или `<space>#`, и строковое значение (вдохновлено форматом git trailer).
    - Токен футера ДОЛЖЕН использовать `-` вместо пробелов, например, `Acked-by`. Исключение: `BREAKING CHANGE`, который также МОЖЕТ использоваться как токен.
    - Значение футера МОЖЕТ содержать пробелы и символы новой строки. Парсинг ДОЛЖЕН завершаться при обнаружении следующей пары токен/разделитель.


## Указание критических изменений (Breaking Changes)

- В префиксе типа/области: с помощью `!` непосредственно перед `:`, например, `feat!: изменение, ломающее обратную совместимость`. В этом случае описание коммита используется для описания критического изменения, и `BREAKING CHANGE:` МОЖЕТ быть опущен из футера.
- В футере: как отдельная запись `BREAKING CHANGE: <description>`.


## Спецификация (ключевые слова RFC 2119)

- Коммиты ДОЛЖНЫ начинаться с типа, состоящего из существительного (`feat`, `fix` и т.д.), за которым следует ОПЦИОНАЛЬНАЯ область, ОПЦИОНАЛЬНЫЙ `!` и ОБЯЗАТЕЛЬНОЕ двоеточие и пробел.
- Тип `feat` ДОЛЖЕН использоваться, когда коммит добавляет новую функцию.
- Тип `fix` ДОЛЖЕН использоваться, когда коммит представляет собой исправление ошибки.
- Область МОЖЕТ быть предоставлена после типа. Область ДОЛЖНА состоять из существительного, описывающего часть кодовой базы, заключенного в круглые скобки.
- Описание ДОЛЖНО следовать сразу после двоеточия и пробела после префикса типа/области.
- Более длинное тело коммита МОЖЕТ быть предоставлено после короткого описания.
- Тело коммита может состоять из любого количества абзацев.
- Один или несколько футеров МОГУТ быть предоставлены.
- Критические изменения ДОЛЖНЫ быть указаны в префиксе типа/области или в футере.
- Если указано в футере, критическое изменение ДОЛЖНО состоять из заглавного текста `BREAKING CHANGE`, за которым следует двоеточие, пробел и описание.
- Если указано в префиксе, критические изменения ДОЛЖНЫ быть обозначены `!` непосредственно перед `:`.
- Типы, отличные от `feat` и `fix`, МОГУТ использоваться.
- Единицы информации, составляющие Conventional Commits, НЕ ДОЛЖНЫ рассматриваться как чувствительные к регистру, за исключением `BREAKING CHANGE`, который ДОЛЖЕН быть в верхнем регистре.
- `BREAKING-CHANGE` ДОЛЖЕН быть синонимом `BREAKING CHANGE`, когда используется как токен в футере.


## Преимущества

- Автоматическая генерация CHANGELOG-файлов.
- Автоматическое определение повышения семантической версии.
- Коммуникация характера изменений членам команды, общественности и другим заинтересованным сторонам.
- Инициирование процессов сборки и публикации.
- Упрощение вклада в проекты за счёт более структурированной истории коммитов.


## FAQ (Основные моменты)

- В начальной фазе разработки рекомендуется действовать так, как будто продукт уже выпущен.
- Регистр для типов может быть любым, но лучше быть последовательным.
- Если коммит соответствует нескольким типам, рекомендуется разбить его на несколько.
- Соглашение не препятствует быстрой разработке, а помогает быть организованным.
- Не все участники должны использовать спецификацию, особенно при использовании workflow на основе squash-слияний.
- Для revert-коммитов спецификация не определяет явного поведения, предлагая использовать тип `revert` и футеры для ссылок.

