
## Основные правила хорошего теста

* **Один тест = одна логика**
  Не проверяй слишком много вещей в одном методе. Если тест упал — сразу должно быть понятно, что именно сломалось.
* **Тесты должны быть независимыми**
  Каждый тест работает сам по себе, не зависит от результатов других.
* **Тесты должны быть быстрыми**
  Unit-тесты должны выполняться за миллисекунды. Если они тормозят — это уже integration.
* **Тесты должны быть читаемыми**
  Через 3 месяца ты должен легко понять, что именно проверяет тест.


***

## Структура AAA (Arrange–Act–Assert)

Самый популярный шаблон:

1. **Arrange** — подготовка данных.
2. **Act** — выполнение действия (вызов метода).
3. **Assert** — проверка результата.

Пример:

```java
@Test
void testAddition() {
    // Arrange
    Calculator calc = new Calculator();

    // Act
    int result = calc.add(2, 3);

    // Assert
    assertEquals(5, result);
}
```


***

## Стиль Given–When–Then

Часто используется в BDD (*Behavior Driven Development*).

* **Given** — начальное состояние (что дано).
* **When** — действие, которое совершаем.
* **Then** — ожидаемый результат.

```java
@Test
void givenTwoNumbers_whenAdd_thenCorrectSum() {
    // Given
    Calculator calc = new Calculator();

    // When
    int result = calc.add(2, 3);

    // Then
    assertEquals(5, result);
}
```

Это улучшает **читаемость тестов**, особенно если их много.


***

## Naming convention (как называть тесты)

Лучше использовать **говорящие названия**:

* ❌ Плохо: `test1()`, `checkAdd()`
* ✅ Хорошо: `shouldReturnSum_whenAddingTwoPositiveNumbers()`
* ✅ Хорошо: `givenNegativeNumber_whenSquareRoot_thenThrowException()`

Популярные форматы:

1. **should...when...**
   `shouldReturnZero_whenListIsEmpty()`
2. **given...when...then...**
   `givenInvalidEmail_whenRegister_thenThrowException()`


***

## Принципы FIRST для тестов

Хороший тест соответствует принципам **FIRST**:

* **Fast** — быстрый.
* **Independent** — независимый.
* **Repeatable** — воспроизводимый (одинаковый результат каждый запуск).
* **Self-validating** — проверяет результат автоматически (без ручной проверки).
* **Timely** — написан вовремя (желательно до/во время написания кода).


***

## Пример «плохого» и «хорошего» теста

❌ Плохой:

```java
@Test
void testSomething() {
    Calculator calc = new Calculator();
    assertEquals(5, calc.add(2, 3));
    assertEquals(3, calc.subtract(5, 2));
    assertEquals(10, calc.multiply(2, 5));
}
```

слишком много проверок, непонятное название.


✅ Хороший:

```java
@Test
void shouldReturnSum_whenAddingTwoNumbers() {
    Calculator calc = new Calculator();
    assertEquals(5, calc.add(2, 3));
}

@Test
void shouldReturnDifference_whenSubtractingTwoNumbers() {
    Calculator calc = new Calculator();
    assertEquals(3, calc.subtract(5, 2));
}
```

