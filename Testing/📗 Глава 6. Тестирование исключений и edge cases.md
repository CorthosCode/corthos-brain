
## Что такое edge cases?

**Edge case** (крайний случай) — это ситуация, которая выходит за рамки обычных входных данных или находится "на границе".

Примеры:

* Деление на ноль.
* Пустая строка или `null`.
* Минимальные/максимальные значения (`Integer.MAX_VALUE`).
* Негативные значения там, где ожидаются только положительные.
* Пустые коллекции.


***

## Зачем тестировать edge cases?

* Такие случаи часто приводят к багам.
* Это проверка **устойчивости системы**.
* Они помогают выявить ошибки в требованиях (например, а что должно происходить, если список пустой?).


***

## Тестирование исключений в JUnit 5


✅ `assertThrows`

Используется для проверки, что метод выбрасывает нужное исключение:

```java
@Test
void shouldThrowException_whenDivideByZero() {
    Calculator calc = new Calculator();
    assertThrows(ArithmeticException.class, () -> calc.divide(10, 0));
}
```


✅ Проверка сообщения исключения

```java
@Test
void shouldThrowWithMessage() {
    Exception ex = assertThrows(IllegalArgumentException.class, 
        () -> validateAge(-1));

    assertEquals("Age must be positive", ex.getMessage());
}

void validateAge(int age) {
    if (age < 0) throw new IllegalArgumentException("Age must be positive");
}
```


✅ `assertDoesNotThrow`

Иногда нужно проверить, что метод **не бросает исключений**:

```java
@Test
void shouldNotThrow_whenValidInput() {
    assertDoesNotThrow(() -> validateAge(25));
}
```


***

## Edge cases в тестах

```java
@Test
void shouldReturnEmpty_whenInputEmpty() {
    assertEquals("", reverse(""));
}

@Test
void shouldHandleNull() {
    assertThrows(NullPointerException.class, () -> reverse(null));
}

private String reverse(String s) {
    if (s == null) throw new NullPointerException("Input is null");
    return new StringBuilder(s).reverse().toString();
}
```


***

## Техника «граничных значений» (Boundary Testing)

Когда тестируем числа, стоит проверить:

* Минимальное возможное значение.
* Максимальное возможное значение.
* Значения "рядом с границей".

Пример:

```java
@Test
void shouldHandleIntegerOverflow() {
    Calculator calc = new Calculator();
    assertThrows(ArithmeticException.class, () -> calc.add(Integer.MAX_VALUE, 1));
}
```


***

## Negative testing (негативные сценарии)

Нужно проверять не только то, что код работает "правильно", но и то, что он **корректно ломается**:

* Выбрасывает ожидаемое исключение.
* Возвращает пустой результат вместо краша.
* Логирует ошибку.


***

## Best practices

* Всегда проверяй **ожидаемый тип исключения** (`assertThrows`), а не просто "какой-то Exception".
* Тестируй **и позитивные, и негативные сценарии**.
* Не пиши тесты "на всякий случай" (например, что `1+1=2`), но **граничные условия проверяй всегда**.
* Если метод возвращает `Optional` — проверяй и `.isPresent()`, и `.isEmpty()`.
* Если метод работает со списками — проверяй пустой список, один элемент, много элементов.

