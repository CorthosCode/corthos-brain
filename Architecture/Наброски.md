
**Микросервис** – это небольшая, слабо связанная распределенная служба.

Микросервисы позволяют взять приложение с обширным набором функций и разложить его на простые в управлении компоненты с четко определенными обязанностями. Микросервисы помогают преодолевать традиционные проблемы сложности большой базы кода, разбивая ее на небольшие четко определенные части



Ключевые понятия, о которых следует помнить, рассуждая о микросервисах, – это **декомпозиция** и **развязка** (unbunding). Функции приложений должны быть полностью независимы друг от друга.




характеристики микросервисной архитектуры:
 логика приложения разбита на мелкие компоненты с четко определенными согласованными границами ответственности;
 каждый компонент отвечает за узкий круг задач и развертывается независимо от других; один микросервис отвечает за одну часть предметной области;
 для обмена данными между собой микросервисы используют облегченные протоколы, такие как HTTP и JSON (JavaScript Object Notation – форма записи объектов JavaScript);
 приложения на основе микросервисов всегда обмениваются данными с использованием технологически нейтрального формата (чаще всего используется JSON), поэтому техническая реализация службы не имеет значения; это означает, что приложение, состоящее из микросервисов, может быть написано на нескольких языках и с использованием нескольких технологий;
 микросервисы – благодаря небольшому размеру, независимому и распределенному характеру – позволяют организациям иметь небольшие группы разработчиков с четко определенными сферами ответственности. Эти группы могут работать над достижения единой цели, например над созданием приложения, но каждая несет ответственность только за те службы, над которыми они работают.





«Разбив» приложения на мелкие службы и переместив их из единого монолитного артефакта в распределенную среду, можно строить системы: 
 гибкие – отдельные службы можно конструировать и реорганизовывать независимо друг от друга и быстро предоставлять новые возможности. Чем меньше единица служба, тем проще ее изменить и тем меньше времени уходит на ее тестирование и развертывание;
 устойчивые – приложение, разделенное на отдельные службы, больше не представляет собой единый «комок грязи», в котором выход из строя одной части приводит к сбою всего приложения. Сбои можно локализовать в небольшой части приложения и устранить до того, как приложение остановится. В случае неисправимой ошибки приложение может продолжать работать, оказывая более узкий круг услуг;
 масштабируемые – приложение, разделенное на отдельные службы, легко распределить по горизонтали между несколькими серверами и тем самым масштабировать функции/службы. В монолитном приложении, где вся логика взаимосвязана, приложение должно масштабироваться целиком, даже если узким местом является лишь небольшая его часть. Масштабирование небольших служб проще и намного рентабельнее.




небольшие, простые и разделенные службы = масштабируемые, устойчивые и гибкие приложения.




В законе Конвея (впервые был описан в апреле 1968 года Мелвином Р. Конвеем (Melvin R. Conway) в статье «How Do Committees Invent») говорится, что «организации, проектирующие системы... ограничены дизайном, который копирует структуру коммуникации в этой организации». По сути, это означает, что характер коммуникации внутри команды и между командами напрямую отражается в коде, который они создают.
Если применить закон Конвея в обратном порядке (также известный как обратный маневр Конвея) и спроектировать структуру компании, опираясь на микросервисную архитектуру, то коммуникация, стабильность и организационная структура приложений улучшатся, если создать слабосвязанные и автономные группы для реализации микросервисов.







Модели облачных вычислений позволяют пользователю выбирать уровень контроля над информацией и услугами, которые они предоставляют. Эти модели известны своими аббревиатурами обычно в формате XaaS, обозначающими нечто как услуга (anything as a service). Ниже перечислены наиболее распространенные модели облачных вычислений, а на рис. 1.9 показаны различия между этими моделями.

 Инфраструктура как услуга (Infrastructure as a Service, IaaS). Поставщик предоставляет инфраструктуру, которая позволяет получать доступ к вычислительным ресурсам, таким как серверы, хранилища и сети. В этой модели пользователь сам отвечает за все, что связано с обслуживанием инфраструктуры и масштабированием приложений. Примерами платформ IaaS могут служить AWS (EC2), Azure Virtual Machines, Google Compute Engine и Kubernetes.

 Контейнер как услуга (Container as a Service, CaaS). Промежуточная модель между IaaS и PaaS. Относится к форме виртуализации на основе контейнеров. В отличие от модели IaaS, где разработчик имеет полный контроль над виртуальной машиной, где развертывается служба, в модели CaaS вам предоставляется легковесный переносимый виртуальный контейнер (например, Docker). Поставщик облачных услуг запускает виртуальный сервер, на котором выполняется контейнер, а также имеются инструменты для создания, развертывания, мониторинга и масштабирования контейнеров. Примерами платформ CaaS могут служить Google Container Engine (GKE) и Amazon Elastic Container Service (ECS). В главе 11 вы увидите, как разворачивать свои микросервисы вAmazon ECS.

 Платформа как услуга (Platform as a Service, PaaS). Эта модель предоставляет платформу и окружение, которые позволяют пользователям сосредоточиться на разработке, выполнении и обслуживании приложения. Приложения могут создаваться с помощью инструментов, предоставляемых поставщиком услуги (например, операционная система, системы управления базами данных, техническая поддержка, хранилище, хостинг, сеть и т. д.). Пользователям не нужно вкладывать средства в физическую инфраструктуру или тратить время на управление ею, что позволяет им сосредоточиться исключительно на разработке приложений. Примерами платформ PaaS могут служить Google App Engine, Cloud Foundry, Heroku и AWS Elastic Beanstalk.

 Функция как услуга (Function as a Service, FaaS). Также известна как бессерверная архитектура – несмотря на такое интересное название, эта архитектура не означает, что код выполняется без сервера. Эта модель предлагает возможность выполнения функций в облаке, которым поставщик услуги предоставляет все необходимые серверы. Бессерверная архитектура позволяет сосредоточиться исключительно на разработке служб, не беспокоясь о масштабировании, инициализации и администрировании серверов. То есть мы можем сосредоточиться только на наших функциях, не заботясь о какой-либо административной инфраструктуре. Примерами платформ FaaS могут служить AWS (Lambda), Google Cloud Function и Azure Functions.




 Программное обеспечение как услуга (Software as a Service, SaaS). Эта модель, также известная как программное обеспечение по запросу, позволяет пользователям использовать конкретное приложение без необходимости развертывать или обслуживать его. В большинстве случаев доступ к таким приложениям осуществляется через веб-браузер. Управление приложением, данными, операционной системой, виртуализацией, серверами, хранилищем и сетью осуществляет поставщик услуг. Пользователь просто приобретает услугу и использует программное обеспечение. Примерами платформ SaaS могут служить Salesforce, SAP и Google Business.








48