
Шаблон сбора метрик описывает порядок извлечения метрик для мониторинга приложения и формирования предупреждений о возможных сбоях.

Он определяет, как служба метрик осуществляет получение (извлечение), хранение и запрос бизнес-данных с целью предотвращения потенциальных проблем с производительностью в наших службах.

Этот шаблон включает три основных компонента.
- Метрики. Фрагменты важной информации, описывающие состояние приложения и как эту информацию получить.
- Служба метрик. Запрашивает метрики у приложения и хранит их.
- Пакет визуализации метрик. Визуализирует данные, характеризующие состояние приложения и инфраструктуры.

Как показано на рисунке, метрики, генерируемые микросервисами, в значительной степени зависят от службы метрик и пакета визуализации.

Бессмысленно генерировать метрики, отражающие бесконечный поток информации, если нет возможности отобразить и проанализировать эту информацию.

Метрики могут пересылаться микросервисом автоматически или извлекаться по запросу службы метрик:
- в первом случае экземпляр микросервиса вызывает API службы метрик и передает ему данные о приложении
- во втором случае служба метрик сама посылает запросы микросервисам для выборки данных о приложении.

Важно понимать, что метрики являются важным элементом микросервисных архитектур, и требования к мониторингу в этих архитектурах обычно выше, чем в монолитных структурах, из-за их распределенного характера.

![Шаблон сбора метрик приложения](assets/Microservices/metrics_template.png)

