
При проектировании микросервиса необходимо подумать о том, как эта служба будет использоваться.

![Базовый шаблон разработки](assets/Microservices/base_architecture_template.png)

Следующие шаблоны, перечисленные на рисунке,  определяют основы создания микросервисов:
- Степень детализации службы
- Протоколы связи
- Архитектура интерфейса
- Управление конфигурацией службы
- Обработка событий между службами


---

## Степень детализации службы

Как правильно выполнить декомпозицию предметной области на микросервисы, чтобы каждый имел соответствующий круг обязанностей?
Слишком широкий круг обязанностей, включающий разные задачи, затрудняет обслуживание и изменение службы с течением времени.
Слишком мелкая детализация увеличивает общую сложность приложения и превращает службу в простой уровень абстракции данных без какой-либо логики, кроме той, которая необходима для доступа к хранилищу.


---

## Протоколы связи

Протоколы задают порядок взаимодействий с вашей службой.

Первый шаг – выбор характера протокола, синхронный или асинхронный. 

Для синхронных взаимодействий чаще всего используется REST на основе HTTP с использованием XML (Extensible Markup Language – расширяемый язык разметки), JSON (JavaScript Object Notation – форма записи объектов JavaScript) или двоичных форматов, таких как Thrift, для обмена данными.

Для асинхронных взаимодействий наиболее популярным выбором является AMQP (Advanced Message Queuing Protocol – расширенный протокол организации очередей сообщений), использующий очереди (для взаимодействий типа точка–точка) или темы (для взаимодействий типа публикация–подписка) с брокерами сообщений, такими как RabbitMQ, Apache Kafka и Amazon Simple Queue Service (SQS).


---

## Архитектура интерфейса

Как лучше всего организовать интерфейс, который другие разработчики будут использовать для вызова вашей службы?
Как структурировать оказываемые услуги?
Какие приемы существуют?


---

## Управление конфигурацией службы

Как организовать управление конфигурацией микросервиса так, чтобы ее можно было перемещать между разными окружениями в облаке?


---

## Обработка событий между службами

Как с помощью событий минимизировать количество жестких зависимостей между службами и повысить отказоустойчивость приложения?

