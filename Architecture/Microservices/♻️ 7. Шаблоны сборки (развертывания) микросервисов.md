
Одно из основных требований архитектуры микросервисов заключается в том, что каждый экземпляр микросервиса должен быть идентичен всем другим его экземплярам.

Нельзя допускать дрейфа конфигурации (когда что-то меняется в ней после развертывания экземпляра), потому что это может привести к нестабильному поведению приложения.

Цель этого шаблона – интегрировать конфигурацию инфраструктуры прямо в процесс сборки/развертывания, чтобы вам больше не приходилось развертывать программные артефакты, такие как файлы WAR или EAR, в уже работающую часть инфраструктуры.

Вместо этого процесс сборки должен создавать и компилировать микросервис и образ виртуального сервера для его выполнения.

А процесс развертывания микросервиса должен развертывать образ всей машины с запущенным на ней сервером.

Шаблоны и темы:
- **Конвейеры сборки и развертывания**. Помогает определить повторяемый процесс сборки и развертывания, в котором упор делается на сборку одной кнопкой и развертывание в любом окружении в вашей организации.
- **Инфраструктура как код**. Определяет отношение к службам как к коду, который может выполняться и управляться с помощью системы управления версиями.
- **Неизменяемые серверы**. Создание образа микросервиса позволяет гарантировать, что он никогда не изменится после развертывания.
- **Серверы Phoenix**. Гарантирует регулярное отключение и воссоздание серверов, на которых запущены отдельные контейнеры, из неизменяемого образа. Чем дольше работает сервер, тем вероятней появление отклонений от стандартной конфигурации. Дрейф конфигурации может возникнуть, если специальные изменения в конфигурации не фиксируются в системе управления версиями.

Цель этих шаблонов – выявление и безжалостное искоренение дрейфа конфигурации еще до того, как он поразит промышленное окружение.

![Шаблоны сборки-развертывания микросервисов](assets/Microservices/deployment_template.png)

