
![](assets/_I8qHLFzA5hWk_dhz7DxsrDKNrWUywIzdPtyH2Q-IRo=.png)


## Что такое тернарная логика в БД?

Большинство языков программирования используют **булеву логику** (две истины):

* `TRUE` (истина)
* `FALSE` (ложь)

Но в реляционных БД (например, PostgreSQL, Oracle, SQL Server, MySQL) используется **трёхзначная логика** (Three-Valued Logic, 3VL), потому что есть ещё одно особое значение:

* `UNKNOWN` (неизвестно)

Оно появляется из-за использования `NULL`, который означает *отсутствие значения*.


***

## Основные значения в тернарной логике SQL

* `TRUE`
* `FALSE`
* `UNKNOWN` (например, результат `NULL = 5` или `NULL = NULL`)


***

## Правило UNKNOWN в SQL:

При сравнениях (`=`, `<`, `>`, `<>`, `!=` и т.п.) с `NULL` результат всегда `UNKNOWN`.

Примеры:

```sql
SELECT NULL = NULL;   -- UNKNOWN
SELECT NULL <> 5;     -- UNKNOWN
SELECT 10 > NULL;     -- UNKNOWN
```

Почему? Потому что `NULL` в SQL — это *неизвестное значение*, и сравнить «неизвестное» с чем-либо невозможно.


***

## Отрицание (NOT)

| X       | NOT X   |
| ------- | ------- |
| TRUE    | FALSE   |
| FALSE   | TRUE    |
| UNKNOWN | UNKNOWN |


***

## Конъюнкция (AND)

| X       | Y       | X AND Y |
| ------- | ------- | ------- |
| TRUE    | TRUE    | TRUE    |
| TRUE    | FALSE   | FALSE   |
| TRUE    | UNKNOWN | UNKNOWN |
| FALSE   | (любое) | FALSE   |
| UNKNOWN | UNKNOWN | UNKNOWN |


***

## Дизъюнкция (OR)

| X       | Y       | X OR Y  |
| ------- | ------- | ------- |
| TRUE    | (любое) | TRUE    |
| FALSE   | FALSE   | FALSE   |
| FALSE   | UNKNOWN | UNKNOWN |
| UNKNOWN | UNKNOWN | UNKNOWN |


***

## Примеры в PostgreSQL

```sql
-- TRUE AND NULL → UNKNOWN
SELECT TRUE AND NULL;  

-- FALSE OR NULL → UNKNOWN
SELECT FALSE OR NULL;

-- Проверка NULL через обычное сравнение
SELECT NULL = NULL;   -- результат: NULL (UNKNOWN)
SELECT NULL <> NULL;  -- результат: NULL (UNKNOWN)

-- Правильная проверка на NULL
SELECT NULL IS NULL;  -- TRUE
SELECT 5 IS NULL;     -- FALSE
```


***

## Важные следствия

`WHERE` фильтрует строки только по условию `TRUE`.

* `FALSE` и `UNKNOWN` строки **не попадают в результат**.

Пример:

```sql
SELECT * FROM users WHERE age > 30;
```

Если `age` = `NULL`, условие → `UNKNOWN`, и строка не вернётся.


Для проверки `NULL` всегда используются специальные операторы:

* `IS NULL`, `IS NOT NULL`
* `IS DISTINCT FROM` (в PostgreSQL, работает как "безопасное" `=` для `NULL`).

```sql
SELECT 1 IS DISTINCT FROM NULL;  -- TRUE (они различны)
SELECT NULL IS DISTINCT FROM NULL; -- FALSE (они не различны)
```

`NULL` в агрегатных функциях обычно **игнорируется**:

```sql
SELECT AVG(salary) FROM employees; -- NULL-ы не учитываются
```

