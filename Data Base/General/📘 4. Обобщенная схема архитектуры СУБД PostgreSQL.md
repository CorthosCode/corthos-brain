# üìò –û–±–æ–±—â–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –°–£–ë–î PostgreSQL

## **–í–Ω–µ—à–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å (External Level)**

* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑:
  * **SQL-–∫–ª–∏–µ–Ω—Ç—ã** (`psql`, DBeaver, PgAdmin, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Python/Java –∏ —Ç. –¥.);
  * **views** (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è), **materialized views**;
  * –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (`GRANT`, `REVOKE`).
* –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Å–≤–æ—é "–∫–∞—Ä—Ç–∏–Ω—É –¥–∞–Ω–Ω—ã—Ö".
  &#x20;üëâ –ü—Ä–∏–º–µ—Ä: –±—É—Ö–≥–∞–ª—Ç–µ—Ä—É –º–æ–∂–Ω–æ –¥–∞—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ `SELECT` –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `invoices`, –∞ HR —Ç–æ–ª—å–∫–æ –∫ `employees`.





***

## **–ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (Conceptual Level)**

* –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω **–ª–æ–≥–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª—å—é –¥–∞–Ω–Ω—ã—Ö** –≤ —Å—Ö–µ–º–µ PostgreSQL:
  * **—Ç–∞–±–ª–∏—Ü—ã** (`CREATE TABLE`);
  * **—Å–≤—è–∑–∏ (PK/FK)**;
  * **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏** (`NOT NULL`, `CHECK`, `UNIQUE`);
  * **—Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** (–≤ PostgreSQL –æ—á–µ–Ω—å –±–æ–≥–∞—Ç—ã: –æ—Ç `INTEGER` –¥–æ `JSONB`, `ARRAY`, `UUID`).
* –í —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ –º—ã –º—ã—Å–ª–∏–º **—Å—É—â–Ω–æ—Å—Ç—è–º–∏ –∏ —Å–≤—è–∑—è–º–∏**, –∞ –Ω–µ —Ñ–∞–π–ª–∞–º–∏ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏.





***

## **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å (Internal Level)**

–í PostgreSQL –∏–º–µ–Ω–Ω–æ —Ç—É—Ç –∫—Ä–æ–µ—Ç—Å—è –µ–≥–æ —Å–∏–ª–∞.

* **–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**:
  * –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **heap-—Ñ–∞–π–ª–∞—Ö** (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ 8 –ö–ë);
  * –∏–Ω–¥–µ–∫—Å—ã: `B-Tree`, `Hash`, `GIN`, `GiST`, `BRIN`;
  * –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **TOAST** (—Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫/JSON).
* **–ë—É—Ñ–µ—Ä–Ω—ã–π –∫—ç—à**: PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π shared buffer pool + page cache –û–°.
* **WAL (Write-Ahead Log)**: –∂—É—Ä–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≤–∞–∂–Ω–æ –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏).
* **–§–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã**:
  * `checkpointer` ‚Äî —Å–±—Ä–æ—Å –≥—Ä—è–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü;
  * `wal writer` ‚Äî –ø–∏—à–µ—Ç WAL;
  * `autovacuum` ‚Äî —á–∏—Å—Ç–∫–∞ "–º–µ—Ä—Ç–≤—ã—Ö" —Å—Ç—Ä–æ–∫ (MVCC);
  * `bgwriter` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ —Å—Ç—Ä–∞–Ω–∏—Ü.





***

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã PostgreSQL



### 1. **–Ø–¥—Ä–æ (Server Backend)**

* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–∫–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –æ—Ç–¥–µ–ª—å–Ω—ã–π backend-–ø—Ä–æ—Ü–µ—Å—Å).
* **–ú–µ–Ω–µ–¥–∂–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**:
  * —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **MVCC** (–∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç —Å–≤–æ—é "—Å–Ω–∏–º–æ–∫" –ë–î);
  * –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (row-level locks, advisory locks);
  * –∏–∑–æ–ª—è—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (Read Committed, Repeatable Read, Serializable).



### 2. **–û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤**

* PostgreSQL –∏–º–µ–µ—Ç –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–æ–≤:
  * —Å—Ç—Ä–æ–∏—Ç –ø–ª–∞–Ω (Seq Scan, Index Scan, Bitmap Scan, Hash Join, Nested Loop, Merge Join);
  * —É–º–µ–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (ANALYZE)**;
  * –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** (parallel query).



### 3. **–ú–æ–¥—É–ª—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π**

* PostgreSQL ‚Äî **extensible**:
  &#x20;–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, —Ñ—É–Ω–∫—Ü–∏–∏, –∏–Ω–¥–µ–∫—Å—ã, —è–∑—ã–∫–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä (`plpgsql`, `plpythonu` –∏ –¥—Ä.).
* –°—É—â–µ—Å—Ç–≤—É—é—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
  * `PostGIS` (–≥–µ–æ–¥–∞–Ω–Ω—ã–µ),
  * `pg_partman` (–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ),
  * `timescaledb` (—Ç–∞–π–º-—Å–µ—Ä–∏–∏).



### 4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

* –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: md5, scram-sha-256, Kerberos, SSL.
* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ä–æ–ª–∏ –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏.
* Row-Level Security (RLS) ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫.





***

## PostgreSQL –≤ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π –º–æ–¥–µ–ª–∏ ANSI/SPARC

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–ª–∏–µ–Ω—Ç—ã, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        ‚îÇ
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        ‚îÇ –í–Ω–µ—à–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
        ‚îÇ   (Views, Roles, DCL)
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        ‚îÇ –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
        ‚îÇ   (–°—Ö–µ–º—ã, —Ç–∞–±–ª–∏—Ü—ã, PK/FK, JSONB)
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        ‚îÇ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
        ‚îÇ   (Heap-—Ñ–∞–π–ª—ã, 8KB —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã,
        ‚îÇ    WAL, –±—É—Ñ–µ—Ä—ã, MVCC, —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã)
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        ‚îÇ –§–∞–π–ª—ã –û–° –∏ –¥–∏—Å–∫–æ–≤–∞—è –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞
```



