# üìò –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π PostgreSQL

–í PostgreSQL (–∫–∞–∫ –∏ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –°–£–ë–î) –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (constraints)**.

–û–Ω–∏ –∑–∞–¥–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ `INSERT` / `UPDATE`.





***

## **NOT NULL**

–ó–∞–ø—Ä–µ—â–∞–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å `NULL` –≤ –∫–æ–ª–æ–Ω–∫–µ.

```sql
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,   -- –∏–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
    salary NUMERIC
);
```





***

## **UNIQUE**

–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–ª–æ–Ω–∫–µ –∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–æ–ª–æ–Ω–æ–∫.

```sql
CREATE TABLE users (
    email TEXT UNIQUE,    -- –Ω–µ–ª—å–∑—è –∑–∞–≤–µ—Å—Ç–∏ –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–¥–Ω–∏–º email
    phone TEXT
);
```





***

## **PRIMARY KEY**

* –¢–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ `UNIQUE + NOT NULL`.
* –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å—Ç—Ä–æ–∫–∏.
* –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ—Å—Ç–∞–≤–Ω—ã–º (–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ª–æ–Ω–æ–∫).

```sql
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INT NOT NULL
);
```





***

## **FOREIGN KEY (–°—Å—ã–ª–æ—á–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å)**

–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–ª–æ–Ω–∫–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü–µ.

```sql
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    name TEXT
);

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customers(id)  -- —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
);
```

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏: `ON DELETE CASCADE`, `ON UPDATE CASCADE`, `SET NULL`, `SET DEFAULT`, `RESTRICT`.





***

## **CHECK**

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å —É—Å–ª–æ–≤–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

```sql
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    price NUMERIC CHECK (price > 0),  -- —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π
    discount NUMERIC CHECK (discount BETWEEN 0 AND 100)
);
```





***

## **EXCLUSION (–¢–æ–ª—å–∫–æ –≤ PostgreSQL)**

–ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç `UNIQUE`.

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É—Å–ª–æ–≤–∏—é (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏ –∏ –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π).

–ü—Ä–∏–º–µ—Ä: –Ω–µ–ª—å–∑—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ä–µ—Å—É—Ä—Å –Ω–∞ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–π—Å—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª:

```sql
CREATE TABLE bookings (
    room_id INT,
    during TSRANGE,  -- –¥–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏
    EXCLUDE USING gist (
        room_id WITH =,
        during WITH &&
    )
);
```

–ó–¥–µ—Å—å `&&` ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤.





***

## –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ     | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                              |
| --------------- | ----------------------------------------------------------------------- |
| **NOT NULL**    | –ó–∞–ø—Ä–µ—â–∞–µ—Ç `NULL`                                                        |
| **UNIQUE**      | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π                                       |
| **PRIMARY KEY** | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏ (`NOT NULL + UNIQUE`)                              |
| **FOREIGN KEY** | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Å—ã–ª–æ—á–Ω—É—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å (–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü–µ) |
| **CHECK**       | –£—Å–ª–æ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π                                              |
| **EXCLUSION**   | –ò—Å–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–¥–∏–∞–ø–∞–∑–æ–Ω—ã, –≥–µ–æ–º–µ—Ç—Ä–∏—è –∏ –¥—Ä.)           |



