# üìò –ü—Ä–µ–¥–∏–∫–∞—Ç—ã –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ SQL

**–ü—Ä–µ–¥–∏–∫–∞—Ç—ã –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤** ‚Äî —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞ (`SELECT`) –≤ —É—Å–ª–æ–≤–∏—è—Ö –≤–Ω–µ—à–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

–û–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –Ω–∞–±–æ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π.





***

## `IN` / `NOT IN`

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º, –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã–º –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º.

```sql
-- –ù–∞–π—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞—Ö –ù—å—é-–ô–æ—Ä–∫–∞
SELECT name, department_id
FROM employees
WHERE department_id IN (
    SELECT id
    FROM departments
    WHERE location = 'New York'
);
```

‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `NOT IN`: –µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—ë—Ç `NULL`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å `UNKNOWN`, –∏ —Å—Ç—Ä–æ–∫–∞ –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ –≤—ã–±–æ—Ä–∫—É. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `NOT EXISTS`.





***

## `EXISTS` / `NOT EXISTS`

–ü—Ä–æ–≤–µ—Ä–∫–∞ **–Ω–∞–ª–∏—á–∏—è —Å—Ç—Ä–æ–∫** –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–µ.

```sql
-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –ø—Ä–µ–º–∏–∏
SELECT e.name
FROM employees e
WHERE EXISTS (
    SELECT 1
    FROM bonuses b
    WHERE b.employee_id = e.id
);

-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –ø—Ä–µ–º–∏–π
SELECT e.name
FROM employees e
WHERE NOT EXISTS (
    SELECT 1
    FROM bonuses b
    WHERE b.employee_id = e.id
  );
```

‚úî `EXISTS` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `TRUE`, –µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—É–ª —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.

‚úî –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö.





***

## `ANY` / `SOME`

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å **–∫–∞–∂–¥—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –Ω–∞–±–æ—Ä–∞** (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å –æ–¥–Ω–∏–º).

```sql
-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π –±–æ–ª—å—à–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π –∑–∞—Ä–ø–ª–∞—Ç—ã –∏–∑ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ 10
SELECT name, salary
FROM employees
WHERE salary > ANY (
    SELECT salary
    FROM employees
    WHERE department_id = 10
);
```

‚úî `= ANY` —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ `IN`.

‚úî `> ANY` ‚Äî ¬´–±–æ–ª—å—à–µ, —á–µ–º –º–∏–Ω–∏–º—É–º¬ª –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞.





***

## `ALL`

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å –Ω–∞–±–æ—Ä–æ–º: —É—Å–ª–æ–≤–∏–µ –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è **–¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤**.

```sql
-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π –≤—ã—à–µ –≤—Å–µ—Ö –∑–∞—Ä–ø–ª–∞—Ç –≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ 10
SELECT name, salary
FROM employees
WHERE salary > ALL (
    SELECT salary
    FROM employees
    WHERE department_id = 10
);
```

‚úî `> ALL` ‚Äî ¬´–±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞¬ª.

‚úî `< ALL` ‚Äî ¬´–º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞¬ª.





***

## –°–∫–∞–ª—è—Ä–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã

–ü–æ–¥–∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–æ–¥–Ω–æ –ø–æ–ª–µ –∏ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É).

–ï–≥–æ –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ `=`, `>`, `<` –∏ —Ç. –¥.

```sql
-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π
SELECT name, salary
FROM employees
WHERE salary > (
    SELECT AVG(salary)
    FROM employees
);
```

‚ö†Ô∏è –ï—Å–ª–∏ —Å–∫–∞–ª—è—Ä–Ω—ã–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ ‚Üí –æ—à–∏–±–∫–∞.





***

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ—Ä—Ç–µ–∂–∞–º–∏ (PostgreSQL)

PostgreSQL –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∫–∞–ª—è—Ä—ã, –Ω–æ –∏ **–∫–æ—Ä—Ç–µ–∂–∏ (tuple)**.

```sql
-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö (–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç, –¥–æ–ª–∂–Ω–æ—Å—Ç—å) —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∫–µ–º-—Ç–æ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤–∞–∫–∞–Ω—Å–∏–π
SELECT name, department_id, job_id
FROM employees
WHERE (department_id, job_id) IN (
    SELECT department_id, job_id
    FROM vacancies
);
```





***

## –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–≤

| –ü—Ä–µ–¥–∏–∫–∞—Ç                         | –ó–Ω–∞—á–µ–Ω–∏–µ                                                            |
| -------------------------------- | ------------------------------------------------------------------- |
| `IN` / `NOT IN`                  | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –º–Ω–æ–∂–µ—Å—Ç–≤—É                                   |
| `EXISTS` / `NOT EXISTS`          | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å—Ç—Ä–æ–∫                                              |
| `ANY` / `SOME`                   | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏—è —Ö–æ—Ç—è –±—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ |
| `ALL`                            | –£—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–Ω–æ–∂–µ—Å—Ç–≤–∞                    |
| –°–∫–∞–ª—è—Ä–Ω—ã–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å              | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ, —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é                     |
| –ö–æ—Ä—Ç–µ–∂–Ω—ã–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å (PostgreSQL) | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º —Å—Ä–∞–∑—É                                 |



