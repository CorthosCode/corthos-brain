# üìò DISTINCT –≤ SQL

–û–ø–µ—Ä–∞—Ç–æ—Ä **`DISTINCT`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `SELECT`, —á—Ç–æ–±—ã **—É–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã** –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞.

* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `SELECT` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ (–≤–∫–ª—é—á–∞—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ).
* `DISTINCT` –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.





***

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
SELECT DISTINCT column1, column2, ...
FROM table_name;
```





***

## –ü—Ä–∏–º–µ—Ä—ã

–ë–µ–∑ DISTINCT (–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–Ω–∞—á–µ–Ω–∏—è)

```sql
SELECT country FROM users;
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```sql
USA
USA
Canada
Germany
USA
Canada
```

–° `DISTINCT`

```sql
SELECT DISTINCT country FROM users;
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```sql
USA
Canada
Germany
```





***

## DISTINCT –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ª–æ–Ω–æ–∫

–ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫, —Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ø–æ **–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏** –∑–Ω–∞—á–µ–Ω–∏–π.

```sql
SELECT DISTINCT country, city FROM users;
```

üëâ –£–±–µ—Ä—ë—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –ø–∞—Ä–µ `(country, city)`.





***

## DISTINCT vs. GROUP BY

–ò–Ω–æ–≥–¥–∞ `DISTINCT` = `GROUP BY`, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

```sql
SELECT DISTINCT country FROM users;
```

—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:

```sql
SELECT country FROM users GROUP BY country;
```

üìå –ù–æ `GROUP BY` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞—â–µ –¥–ª—è **–∞–≥—Ä–µ–≥–∞—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**:

```sql
SELECT country, COUNT(*) FROM users GROUP BY country;
```





***

## DISTINCT ON (–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å PostgreSQL üéØ)

Postgres —Ä–∞—Å—à–∏—Ä—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç SQL –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ **–ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å—Ç–æ–ª–±—Ü—É**, –æ—Å—Ç–∞–≤–∏–≤ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –ø—Ä–∞–≤–∏–ª—É (`ORDER BY`).

```sql
SELECT DISTINCT ON (column) column, other_columns
FROM table
ORDER BY column, other_columns;
```

–ü—Ä–∏–º–µ—Ä:

```sql
SELECT DISTINCT ON (country) country, name, age
FROM users
ORDER BY country, age DESC;
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

* –í–µ—Ä–Ω—ë—Ç **–ø–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–∑ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã**, –ø—Ä–∏—á—ë–º —ç—Ç–æ –±—É–¥–µ—Ç **—Å–∞–º—ã–π —Å—Ç–∞—Ä—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** (—Ç–∞–∫ –∫–∞–∫ `ORDER BY age DESC`).

‚ö° –≠—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Ñ–∏—à–∫–∞ PostgreSQL (–≤ MySQL, Oracle, MSSQL —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç).





***

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è DISTINCT

* –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å `*` –∏ `DISTINCT ON` –≤–º–µ—Å—Ç–µ (—Ç–æ–ª—å–∫–æ `DISTINCT *`).
* –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `DISTINCT ON` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `ORDER BY`, –∏–Ω–∞—á–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º.
* –ü—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö `DISTINCT` –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Ä–æ–≥–∏–º –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Ç–∞–∫ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏–ª–∏ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ).





***

## DISTINCT —Å –∞–≥—Ä–µ–≥–∞—Ç–∞–º–∏

–ú–æ–∂–Ω–æ —Å–æ–≤–º–µ—â–∞—Ç—å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:

```sql
SELECT COUNT(DISTINCT country) FROM users;
```

üëâ –≤–µ—Ä–Ω—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω.



