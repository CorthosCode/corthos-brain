
## 1.¬†–ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏?

-¬†**–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏** ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ JVM, –∞ –Ω–µ –Ω–∞—Ç–∏–≤–Ω–æ–π –û–°.  
- –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–∏—Å–∞—Ç—å¬†**–≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è,**¬†—Å–æ—Ö—Ä–∞–Ω—è—è¬†**–ø—Ä–æ—Å—Ç–æ—Ç—É —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.**  
- –ü—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è¬†**–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–º –ø–æ—Ç–æ–∫–∞–º** (platform threads), –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—ë—Ä—Ç–∫–æ–π –Ω–∞–¥ –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –û–° –∏ –¥–æ—Ä–æ–≥–∏ –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º (—Å—Ç–µ–∫ ~1 –ú–ë –Ω–∞ –ø–æ—Ç–æ–∫).  
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –∏–º–µ—é—Ç¬†**–º–∞–ª–µ–Ω—å–∫–∏–π —Å—Ç–µ–∫** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ö–ë) –∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è¬†**–º–∏–ª–ª–∏–æ–Ω–∞–º–∏.**  
  
> ‚ö†Ô∏è¬†**–í–∞–∂–Ω–æ:**¬†–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ ‚Äî¬†**–Ω–µ –∑–∞–º–µ–Ω–∞** –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–º. –û–Ω–∏¬†**–Ω–µ —É—Å–∫–æ—Ä—è—é—Ç CPU-bound –∑–∞–¥–∞—á–∏.**¬†–û–Ω–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è¬†**I/O-bound** –∏¬†**–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö** –æ–ø–µ—Ä–∞—Ü–∏–π.  


---

## 2.¬†–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤

```java
// –°–ø–æ—Å–æ–± 1: —á–µ—Ä–µ–∑ Thread.ofVirtual()
Thread thread = Thread.ofVirtual().name("my-vthread").unstarted(() -> {
    // –≤–∞—à –∫–æ–¥
});

thread.start();


// –°–ø–æ—Å–æ–± 2
Thread.startVirtualThread(() -> {  
  // –≤–∞—à –∫–æ–¥
});


// –°–ø–æ—Å–æ–± 3: —á–µ—Ä–µ–∑ Thread.ofVirtual() —Å –∑–∞–ø—É—Å–∫–æ–º
Thread.ofVirtual().start(() -> {  
  // –≤–∞—à –∫–æ–¥
});


// –°–ø–æ—Å–æ–± 4: —á–µ—Ä–µ–∑ Executors
try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {
    IntStream.range(0, 10_000).forEach(i -> {
        executor.submit(() -> {
            // –≤–∞—à –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP-–∑–∞–ø—Ä–æ—Å, –ë–î-–∑–∞–ø—Ä–æ—Å)
            return i;
        });
    });
} // –∂–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
```

-¬†`Executors.newVirtualThreadPerTaskExecutor()` ‚Äî¬†**—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±** –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á.  
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏¬†**–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è** –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.  
- –û–Ω–∏¬†**–Ω–µ –ø—É–ª—É—é—Ç—Å—è** ‚Äî –∫–∞–∂–¥—ã–π —Ä–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π.  


---

## 3.¬†–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è  

üîπ¬†**–ù–µ —è–≤–ª—è—é—Ç—Å—è –¥–µ–º–æ–Ω–∞–º–∏** - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†**–Ω–µ –¥–µ–º–æ–Ω–∏—á–µ—Å–∫–∏–µ,**¬†–Ω–æ —ç—Ç–æ¬†**–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ JVM,**¬†–ø–æ—Ç–æ–º—É —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏¬†**–Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è "–∂–∏–≤—ã–º–∏"** –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —É—Å–ª–æ–≤–∏—è –≤—ã—Ö–æ–¥–∞ JVM.  

JVM –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞¬†**–≤—Å–µ –ù–ï –¥–µ–º–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ.**  
  

üîπ¬†**–ù–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å joinable –∏–ª–∏ interruptible —á–µ—Ä–µ–∑ Thread API** - –ú–µ—Ç–æ–¥—ã¬†`join()` –∏¬†`interrupt()` —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ¬†**–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è.**¬†–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†`Future, CompletableFuture, StructuredTaskScope.`  
  

üîπ¬†**–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞¬†**—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø—É–ª–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤** (carrier threads), –Ω–∞–∑—ã–≤–∞–µ–º–æ–º¬†**ForkJoinPool.commonPool()** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).  

–≠—Ç–æ¬†**–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É** ‚Äî –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ I/O –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫¬†**–æ—Ç—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è** –æ—Ç carrier-–ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –¥—Ä—É–≥–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫.  
  

üîπ¬†**ThreadLocal** - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è,¬†**–Ω–æ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏.**  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ¬†`ThreadLocal` —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏¬†**–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏,**¬†–µ—Å–ª–∏ –Ω–µ –æ—á–∏—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è.  
-¬†**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**¬†–∏–∑–±–µ–≥–∞—Ç—å¬†`ThreadLocal` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†`try-finally` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏. 
- –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Value


---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–ù–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `synchronized`) –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç underlying –ø–æ—Ç–æ–∫.
- **–ü–æ—Ç–æ–∫–∏ –Ω–µ –Ω–∞—Å–ª–µ–¥—É—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, ThreadLocal) –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ.
- **–û—Ç–ª–∞–¥–∫–∞ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ –∏–∑-–∑–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏.


---

## –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫: 

[JEP 444: Virtual Threads]([https://openjdk.org/jeps/444](https://openjdk.org/jeps/444 "https://openjdk.org/jeps/444")) - Java 21 Specification

