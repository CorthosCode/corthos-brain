
**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ JVM —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç –ø–∞–º—è—Ç—å—é**, –∏ —Ä—É—á–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø—É–ª—ã (object pooling) **—á–∞—Å—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–¥–∞, —á–µ–º –ø–æ–ª—å–∑—ã** –≤ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.


###### üéØ –ü–æ—á–µ–º—É –ø—É–ª—ã –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî –ø–ª–æ—Ö–∞—è –∏–¥–µ—è?


**1. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ (GC) —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω**

**Generational GC**(G1, ZGC, Shenandoah) –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è:

–ë—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è **–∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏—Ö** –æ–±—ä–µ–∫—Ç–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞

**–ü—Ä–∏–º–µ—Ä:** —Å–æ–∑–¥–∞–Ω–∏–µ `new Object()` –≤ Java ‚Äî**–¥–µ—à–µ–≤–∞—è** –æ–ø–µ—Ä–∞—Ü–∏—è


**2. –ü—Ä–æ–±–ª–µ–º—ã –ø—É–ª–æ–≤**

| **–ü—Ä–æ–±–ª–µ–º–∞**           | **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**                                    |
| ---------------------- | -------------------------------------------------- |
| **–£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∫–æ–¥–∞**    | –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º       |
| **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚Üí contention                 |
| **–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏**      | –û–±—ä–µ–∫—Ç—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è, –µ—Å–ª–∏ –∑–∞–±—ã—Ç—å –≤–µ—Ä–Ω—É—Ç—å –≤ –ø—É–ª    |
| **–õ–æ–∂–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è**    | –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ GC —á–∞—Å—Ç–æ –º–µ–Ω—å—à–µ, —á–µ–º –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—É–ª–∞ |


**3. –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

```shellscript
// –¢–µ—Å—Ç: —Å–æ–∑–¥–∞–Ω–∏–µ vs –≤–∑—è—Ç–∏–µ –∏–∑ –ø—É–ª–∞
// –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (JDK 17, G1 GC):
// - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤: 15 –º–ª–Ω ops/sec
// - –ü—É–ª —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π: 2 –º–ª–Ω ops/sec
```


###### üìù –ö–æ–≥–¥–∞ –ø—É–ª—ã –í–°–ï –ñ–ï –Ω—É–∂–Ω—ã?


**üîπ 1. –ö—Ä–∞–π–Ω–µ –¥–æ—Ä–æ–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã**

–ü—Ä–∏–º–µ—Ä—ã:

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (Connection Pool)
* –ü–æ—Ç–æ–∫–∏ (Thread Pool)
* –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã (BufferedImage)


**üîπ 2. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**

* –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (hard real-time)
* –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é


**üîπ 3. –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ JDK**

```java
// –ü—Ä–∏–º–µ—Ä—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø—É–ª–æ–≤:
Integer.valueOf(127); // –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
String.intern();     // –ü—É–ª —Å—Ç—Ä–æ–∫
```


###### ‚öôÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –ø—É–ª–∞–º


‚úÖ 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

```java
void process() {
    var buffer = new byte[1024]; // –°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ —Å—Ç–µ–∫–µ
    // ... –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
} // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è "–æ—á–∏—Å—Ç–∫–∞"
```


‚úÖ 2. –û–±—ä–µ–∫—Ç—ã –Ω–∞ —Å—Ç–µ–∫–µ (Project Valhalla)

–ë—É–¥—É—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å Java:

```java
value class Point { int x, y; } // –ù–µ –∞–ª–ª–æ—Ü–∏—Ä—É–µ—Ç—Å—è –≤ –∫—É—á–µ
```


‚úÖ 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Escape Analysis

JVM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –æ–±—ä–µ–∫—Ç —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ —Å—Ç–µ–∫–µ:

```java
// JIT –º–æ–∂–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç—å –∞–ª–ª–æ–∫–∞—Ü–∏—é:
String format() {
    return new StringBuilder().append("Hello").toString();
}
```


###### ‚ö†Ô∏è –û–ø–∞—Å–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã

‚ùå –°–∞–º–æ–¥–µ–ª—å–Ω—ã–µ –ø—É–ª—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π

```java
// –ü–ª–æ—Ö–æ:
class ListPool {
    private static Queue<ArrayList<?>> pool = new ConcurrentLinkedQueue<>();
    
    static ArrayList<?> getList() {
        ArrayList<?> list = pool.poll();
        return list != null ? list : new ArrayList<>();
    }
}
// –ü—Ä–æ–±–ª–µ–º—ã: 
// - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
// - –û—á–∏—Å—Ç–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```


‚ùå –ü—É–ª—ã –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

```java
// –ë–µ—Å–ø–æ–ª–µ–∑–Ω–æ:
IntPool.get(42); // new int[] –¥–µ—à–µ–≤–ª–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–ª–æ–º
```


###### üìä –ö–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –ù–ï –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª—ã?

1. **–ö–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ –æ–±—ä–µ–∫—Ç—ã** (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ DTO, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)
2. **–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã** (–ø—É–ª—ã —Å–æ–∑–¥–∞—é—Ç contention)
3. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ > —Ä—É—á–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

