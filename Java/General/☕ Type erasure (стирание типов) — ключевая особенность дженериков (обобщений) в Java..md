
## üß† –ß—Ç–æ —Ç–∞–∫–æ–µ type erasure?

**Type erasure** (—Å—Ç–∏—Ä–∞–Ω–∏–µ —Ç–∏–ø–æ–≤) ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º **–æ–±–æ–±—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã (–¥–∂–µ–Ω–µ—Ä–∏–∫–∏) —É–¥–∞–ª—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**, –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è —Å–≤–æ–∏–º–∏ **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏** –∏–ª–∏ **`Object`**, –µ—Å–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–µ—Ç.

–ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:

> –û–±–æ–±—â–µ–Ω–∏—è (generics) –≤ Java ‚Äî —ç—Ç–æ **—Ñ–∏—á–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞**, –∫–æ—Ç–æ—Ä–∞—è **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–π—Ç–∫–æ–¥–µ**.


## üì¶ –ü—Ä–∏–º–µ—Ä

```java
List<String> list = new ArrayList<>();
list.add("Hello");
String s = list.get(0);
```

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ `List<String>` –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤:

```java
List list = new ArrayList();
list.add("Hello");
String s = (String) list.get(0);
```

üîé –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ:

* `<String>` –∏—Å—á–µ–∑
* –º–µ—Ç–æ–¥ `get(0)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Object`, –∏ –Ω—É–∂–µ–Ω **—è–≤–Ω—ã–π –∫–∞—Å—Ç –∫ String**


## üè∑Ô∏è –ü–æ—á–µ–º—É —Ç–∞–∫ —Å–¥–µ–ª–∞–Ω–æ?

Java —Ä–µ—à–∏–ª–∞ –¥–æ–±–∞–≤–∏—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ **–≤ 2004 –≥–æ–¥—É (Java 5)**, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å **–æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ —Å—Ç–∞—Ä—ã–º –±–∞–π—Ç–∫–æ–¥–æ–º –∏ JVM.
&#x20;–ü–æ—ç—Ç–æ–º—É:

* –≤—Å–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ —Å—Ç–∏—Ä–∞—é—Ç—Å—è –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
* JVM **–Ω–µ –∑–Ω–∞–µ—Ç** –ø—Ä–æ `List<String>` ‚Äî –æ–Ω–∞ –≤–∏–¥–∏—Ç –ø—Ä–æ—Å—Ç–æ `List`


## üîç –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Å—Ç–∏—Ä–∞–Ω–∏—è —Ç–∏–ø–æ–≤

‚ùå –ù–µ–ª—å–∑—è —É–∑–Ω–∞—Ç—å —Ç–∏–ø –≤ —Ä–∞–Ω—Ç–∞–π–º–µ:

```java
List<String> list1 = new ArrayList<>();
List<Integer> list2 = new ArrayList<>();

System.out.println(list1.getClass() == list2.getClass()); // true
```

‚úÖ –û–±–∞ –æ–±—ä–µ–∫—Ç–∞ –∏–º–µ—é—Ç **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–∞–π—Ç–∫–æ–¥-–∫–ª–∞—Å—Å** `ArrayList`


‚ùå –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞:

```java
List<String>[] arr = new ArrayList<String>[10]; // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```

üß® –ü–æ—Ç–æ–º—É —á—Ç–æ JVM –Ω–µ —Å–º–æ–∂–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ `String`.


‚ùå –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å instanceof —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Ç–∏–ø–∞:

```java
if (obj instanceof List<String>) // –û—à–∏–±–∫–∞
```

–ú–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Ç–∞–∫:

```java
if (obj instanceof List) // OK
```


‚ùå –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ —Ç–∏–ø—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

```java
void process(List<String> list) {}
void process(List<Integer> list) {} // –û—à–∏–±–∫–∞!
```

–ü–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å–ª–µ —Å—Ç–∏—Ä–∞–Ω–∏—è —É –æ–±–æ–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `process(List list)`


## üõ†Ô∏è –ß—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ —Å—Ç–∏—Ä–∞–Ω–∏—è?

| –û–±—ä—è–≤–ª–µ–Ω–∏–µ            | –ü–æ—Å–ª–µ —Å—Ç–∏—Ä–∞–Ω–∏—è                         |
| --------------------- | -------------------------------------- |
| `T extends Number`    | `T ‚Üí Number`                           |
| `T` (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π) | `T ‚Üí Object`                           |
| `List<T>`             | `List`                                 |
| `T t = ...`           | `Object t = ...` (–µ—Å–ª–∏ T –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω) |


## ‚ú® –ü—Ä–∏–º–µ—Ä: —Ä—É—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```java
class Box<T> {
    T value;
    void set(T val) { value = val; }
    T get() { return value; }
}
```

‚û°Ô∏è –ø–æ—Å–ª–µ type erasure –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤:

```java
class Box {
    Object value;
    void set(Object val) { value = val; }
    Object get() { return value; }
}
```

