# –ò–∑—É—á–∏—Ç—å



@ExtendWith(MockitoExtension.class)

@InjectMocks



thread.yield()





–¥–∏—Å–ø–µ—Ä—Å–∏—è —ç—Ç–æ?







## Hibernate



```java
multiselect
```





**Spring Data JPA `Specifications`**





**JOOQ** ‚Üí –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π SQL DSL, –Ω–æ –Ω–µ JPA.





***

## Database



–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–¥: —ç—Ç–∞–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

![](assets/G_Qxd2RbWXcvppFwXOZsoe186rtf0xLpmDceXiOh6FY=.png)





CASCADE?



WAL (–∂—É—Ä–Ω–∞–ª –ø—Ä–µ–¥–∑–∞–ø–∏—Å–∏)



**—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã**



CASE - –∫–æ–º–∞–Ω–¥–∞



–æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏?



CTE (WITH) ‚Äî Common Table Expressions?



`FETCH FIRST n ROWS ONLY` ?



JOIN FETCH



–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Materialized Views)?



**`UPSERT` - —á—Ç–æ –∑–∞ –∫–æ–º–∞–Ω–¥–∞?**









–õ–µ–∫—Å–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ SQL (–∫–∞–∫ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å) - 4 –≥–ª–∞–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏







**ADT-–ø–æ–¥–æ–±–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** (Result, Option, Expr, State, Command)



* `enum` ‚Äî —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–æ:
  * —É `enum` —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã;









VACUUM



–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - hibernate



MVCC –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞



—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏





**PACELC-—Ç–µ–æ—Ä–µ–º–∞**

***

## JAVA





JDK internals –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ —Ç–∏–ø—ã –æ–±—ä–µ–∫—Ç—ã?





–ó–Ω–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP, –æ–ø—ã—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API;



–ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã;



–ó–Ω–∞–Ω–∏–µ –≥–∏–±–∫–∏—Ö –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ scrum, kanban, XP, etc;







@CrossOrigin("\*")// –†–∞–∑—Ä–µ—à–∞–µ–º –∑–∞–ø—Ä–æ—Å—ã —Å –ª—é–±–æ–≥–æ origin –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã





—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è



* `permits` –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —è–≤–Ω–æ –∏–ª–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –ø–æ–¥—Å—Ç–∞–≤–∏—Ç **–≤—Å–µ –∫–ª–∞—Å—Å—ã-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –∏–∑ —Ç–æ–≥–æ –∂–µ –ø–∞–∫–µ—Ç–∞** (–∏–ª–∏ –º–æ–¥—É–ª—è, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JPMS).



–•–æ—á–µ—à—å, —è —Ä–∞–∑–ª–æ–∂—É **–∫–∞–∂–¥—É—é –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é —Ç–µ–º—É –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä:
üîπ "–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ APT"
üîπ "–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ AOP"
üîπ "–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ Type-System (Checker Framework)"
üîπ "Spring –∏ –º–µ—Ç–∞-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏")

–∏ –¥–∞–º **–≥–ª—É–±–æ–∫–∏–µ —Ä–∞–∑–±–æ—Ä—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤**?



JPMS (Java Platform Module System)



**Annotation Processing Tool (APT)** 



Checker Framework - –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö





JVM **–ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–ª–∞—Å—Å–∞**



* `equals`, `hashCode`, `toString` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç



¬´type tokens¬ª:

```java
public <T> T create(Class<T> clazz) throws Exception {
    return clazz.getDeclaredConstructor().newInstance();
}
```









–¥–∂–µ–Ω–µ—Ä–∏–∫–∏ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É)



**–±–∞–π—Ç–∫–æ–¥ JVM**



* –ù–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—ä–µ–∫—Ç–∞–º–∏ (–∑–∞ —Ä–µ–¥–∫–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –≤ JDK internals).



* heap allocation



TDD



¬´–ò–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç¬ª –∏ ¬´–ß–∏—Å—Ç—ã–π –∫–æ–¥¬ª



virtual thread



–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã,–∫–∞–∫ `vmstat` –∏ `mpstat` –≤ —Å–∏—Å—Ç–µ–º–∞—Ö Unix –∏–ª–∏ `perfmon` –≤ —Å–∏—Å—Ç–µ–º–∞—Ö

Windows, –º–æ–≥—É—Ç —Å–æ–æ–±—â–∏—Ç—å –≤–∞–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ ¬´–≥–æ—Ä—è—á–∏–º–∏¬ª –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã —è–≤–ª—è—é—Ç—Å—è

–≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã.



JWT - java web token (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã)

–º–æ–¥—É–ª–∏/–ø–∞–∫–µ—Ç—ã –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö java, –∏ —Ç–æ –∫–∞–∫ —Ç–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

removeIf - –≤ —Å—Ç—Ä–∏–º–µ

JIT Compiler

parallel() - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å—Ç—Ä–∏–º–∞—Ö

Lazy - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

N + 1 –ø—Ä–æ–±–ª–µ–º–∞

–ö–∞–∫ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î?

–ü—É–ª—ã –ø–æ—Ç–æ–∫–æ–≤ –≤ –ë–î?

Greacefull shutdown?

—à–∞—Ç–¥–∞—É–Ω —Ö—É–∫–∏?

–ø–∏—Ä–∞–º–∏–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?

JMH - java micro benchmark

–∞–≤—Ç–æ—Ç–µ—Å—Ç—ã - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ç–¥



–û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–≥–æ

–∫–æ–¥–∞, –∏–≥—Ä–∏–≤–æ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è *–≥–µ–π–∑–µ–Ω–±–∞–≥–∞–º–∏* (Heisenbug).



—Å—Ç—Ä–∏–º—ã

–∫–ª–∞—Å—Å File?

–ø–∞–∫–µ—Ç nio

virtual threads

time API

stream API

String API

–ò—Å–∫–ª—é—á–µ–Ω–∏—è

–ü–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ


–ù–∞—á–∏–Ω–∞—è—ÅJava6–ø–æ—è–≤–∏–ª–∏—Å—åConcurrentSkipListMap–∏ConcurrentSkip-

ListSet‚Äî–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ–≤–µ—Ä—Å–∏–∏—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ–º–∞—Å—Å–∏–≤–∞SortedMap

–∏–º–Ω–æ–∂–µ—Å—Ç–≤–∞SortedSet (–¢–≥–µ–µ–ú–∞—Ä –∏TreeSet,–æ–±–µ—Ä–Ω—É—Ç—ã—Ö–≤synchronizedMap).




*–∫—Ä–∞–∂–∞ —Ä–∞–±–æ—Ç—ã* (workstealing) - pattern



ThreadLocal



–ù–µ–∞—Ç–æ–º–∞—Ä–Ω—ã–µ 64-—Ä–∞–∑—Ä—è–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏




URL/URI



–ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–π—Ç-–∫–æ–¥ –≤ java

JIT - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä

@Benchmark

@CompilerControl

@ReserveStackAccess


StackWalker 

ProblemBuilder (library )



# –ò–∑—É—á–∏—Ç—å

–ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–µ "–ö—Ä–∞–∂–∞ —Ä–∞–±–æ—Ç—ã"
Atomic

–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ReentrantLock` –∏ `Condition`:

notFull.signal(); // –£–≤–µ–¥–æ–º–ª—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π

* `Thread.join()`
* `LockSupport.park()`
* `Executor`

–ò—Å–∫–ª—é—á–µ–Ω–∏—è Java

Computable\<A, V>

\<u>–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∑–∞–º–∫–æ–º (intrinsic locks)\</u> –∏–ª–∏ \<u>–º–æ–Ω–∏—Ç–æ—Ä–Ω—ã–º –∑–∞–º–∫–æ–º (monitor locks)\</u>

–î–∂–µ–Ω–µ—Ä–∏–∫–∏

`Object.wait`

join()













DataBase:

* ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ (—Å—É—â–Ω–æ—Å—Ç—å ‚Üí –∞—Ç—Ä–∏–±—É—Ç—ã ‚Üí —Å–≤—è–∑–∏)
