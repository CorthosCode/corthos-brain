
Аннотация `@Document` используется в **Spring Data MongoDB** для маркировки класса Java как **документа**, который будет сохраняться в коллекции MongoDB.

Это аналог `@Entity` в JPA/Hibernate, но адаптирован под документоориентированную модель MongoDB.


---

## Структура

``` java
@Document(collection = "collectionName", [другие параметры])
public class MyDocument {
    // ...
}
```


---

## Параметры аннотации

| Параметр     | Тип       | Описание                                                                              | По умолчанию                                                         | Когда использовать                                                               |
| ------------ | --------- | ------------------------------------------------------------------------------------- | -------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| `collection` | `String`  | Название коллекции в MongoDB, в которую будут сохраняться документы этого класса.     | Имя класса в нижнем регистре (например, `MyDocument` → `mydocument`) | Когда нужно использовать **кастомное имя коллекции**, отличное от стандартного.  |
| `value`      | `String`  | Псевдоним для `collection`.                                                           | —                                                                    | Аналогично `collection`.                                                         |
| `language`   | `String`  | Язык по умолчанию для текстового поиска.                                              | —                                                                    | Если используются **текстовые индексы** с `default_language`.                    |
| `collation`  | `String`  | Определяет collation для коллекции (сравнение строк с учётом регистра, языка и т.д.). | —                                                                    | При необходимости задать **кастомные правила сортировки/сравнения**.             |


---

## Использование дискриминатора (наследование)

``` java
@Document
@Inheritance
public abstract class Animal {
    @Id
    private String id;
    private String name;
}

@Document(discriminator = "cat")
public class Cat extends Animal {
    private String breed;
}

@Document(discriminator = "dog")
public class Dog extends Animal {
    private String breed;
}
```

Оба класса будут сохраняться в одну коллекцию (например, `animal`), но с полем `_class` или кастомным дискриминатором.


---

## Когда использовать `@Document`

- При разработке приложений, использующих **MongoDB** как основное хранилище.
- Когда нужна **прямая маппинговая логика** между Java-классом и документом MongoDB.
- При использовании **Spring Data MongoDB** (репозитории, автоматическая сериализация и т.д.).
- При необходимости указать **кастомную коллекцию**, **дискриминатор**, **кастомный кодек** и т.п.

---

## Когда не использовать

- Если вы работаете с **JPA** и реляционной БД — используйте `@Entity`.
- Если вы используете **прямой драйвер MongoDB** (например, `MongoClient`) без Spring Data — аннотация не нужна.
- Если документы не планируется сохранять в MongoDB как целостные сущности.


---

## Лучшие практики

- **Не указывайте `collection`**, если имя коллекции совпадает с именем класса в нижнем регистре (это уменьшает шум в коде).
- Используйте `@Document` **только для корневых сущностей**, а вложенные объекты могут быть простыми POJO.
- Всегда используйте `@Id` для поля, которое будет `_id` в MongoDB.
- Используйте `@Indexed` для полей, по которым планируется **поиск** или **сортировка**.
- При наследовании — используйте `discriminator` и `discriminatorKey` корректно.

